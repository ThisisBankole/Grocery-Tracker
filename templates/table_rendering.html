<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>

<tbody>
    {% set ns = namespace(total_amount=0) %}
    {% for item in items %}
        <tr>
            <td data-label="Item">{{ item.item }}</td>
            <td data-label="Quantity">{{ item.quantity if item.quantity is not none else 0 }}</td>
            <td data-label="Unit Price">
                {% if item.quantity != 0 %}
                    {{ "{:.2f}".format((item.price or 0) / (item.quantity or 1)) }}
                {% else %}
                    0.00
                {% endif %}
            </td>
            <td data-label="Amount">{{ item.price if item.price is not none else 0 }}</td>
            <td data-label="Actions">
                <a href="{{ url_for('edit_grocery', grocery_id=item.id) }}" class="btn btn-sm btn-primary">Edit</a>
                <form action="{{ url_for('delete_grocery', grocery_id=item.id) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this item?');" class="mt-2">
                    <input type="submit" value="Delete" class="btn btn-sm btn-danger">
                </form>
            </td>
        </tr>
        {% set ns.total_amount = ns.total_amount + (item.price or 0) %}
    {% endfor %}
    <tr>
        <td colspan="3" class="text-right font-weight-bold">Total</td>
        <td colspan="2">{{ "{:.2f}".format(ns.total_amount) }}</td>
    </tr>
</tbody>
